# 十六、Qt 学习之路(tip): parent 参数

这是一篇很简单的文章，仅仅是用来说明一下一个参数的作用，因此我把它写成了 tip，而不是接下来的 17.

程序写的多了，你会发现几乎所有的 Qt 类的构造函数都会有一个 parent 参数。这个参数通常是 QObject* 或者是 QWidget* 类型的。很多情况下它都会有一个初始值 0，因此，即便你不去给它复制也没有丝毫的问题。于是，稍微偷懒一下，就会不自觉的忽略了这个参数。那么，这个参数到底是干什么用的呢？

其实，这个参数有很多用处。就像它的名字一样，这个参数指定了组件的父组件。对于一个对话框来说，对话框一般是不作为顶层容器出现的，因此在任务栏上一般是没有对话框的位置的。怎么指定这个对话框不是顶层容器呢？有父组件的组件不就不是顶层容器了吗？因此，只要你指定对话框的 parent 属性，任务栏就不会出现它的身影。当然，如果你不指定，这个对话框就成为顶层容器了，任务栏会给它留个位置的——利用这个特性，就可以实现特殊对话框可以在任务栏出现的效果，比如“关于”对话框的出现。

另外比较通用，也是很重要的作用是，parent 参数指明了组件的父组件，这样，当父组件 delete 时，Qt 可以保证所有子组件——也就是 parent 指针指向这个组件的所有组件——都会被正确的 delete 掉。这是 Qt 能够帮助我们管理一部分内存的原因所在。Qt 是通过遍历 parent 属性来防止了这一部分内存泄漏的。因此，必要情况下还是不要忘记设置这个 parent 属性。当然，如果你不声明这个属性，当整个程序关闭时，操作系统会回收内存——因此我们所说的内存泄漏一般是指我们自己写的应用程序的内部，而不会影响到整个操作系统——当然，如果你实现太可恶，操作系统也会受不了自动关掉你的程序的:-)

本文出自 “豆子空间” 博客，请务必保留此出处 [`devbean.blog.51cto.com/448512/194031`](http://devbean.blog.51cto.com/448512/194031)